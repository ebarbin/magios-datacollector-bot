<table class="table table-striped table-fixed" matSort (matSortChange)="onSortData($event)">
  <thead>
      <tr>
          <th scope="col">({{users?.length}})</th>
          <th mat-sort-header="username" scope="col">{{'Usename' | translate}}</th>
          <th mat-sort-header="roles" scope="col">{{'Role' | translate}}</th>
          <th>{{'Server events' | translate}}</th>
          <th mat-sort-header="joinDate" scope="col">{{'Join date' | translate}}</th>
          
          <th mat-sort-header="lastTextChannelName"scope="col">{{'Last text channel name' | translate}}</th>
          <th mat-sort-header="lastTextChannelDate" scope="col">{{'Last text channel date' | translate}}</th>
          <th mat-sort-header="msgChannelCount"scope="col">{{'Msg channel count' | translate}}</th>
          
          <th mat-sort-header="lastServerId"scope="col">{{'Last server id' | translate}}</th>
          <th mat-sort-header="lastServerAccess"scope="col">{{'Last server access' | translate}}</th>

          <th mat-sort-header="lastVoiceChannelName" scope="col">{{'Last voice channel name' | translate}}</th>
          <th mat-sort-header="lastVoiceChannelAccessDate" scope="col">{{'Last voice channel access date' | translate}}</th>
          <th mat-sort-header="joinVoiceChannelCount" scope="col">{{'Join voice channel count' | translate}}</th>
          <th mat-sort-header="voiceChannelTotalTime" scope="col">{{'Voice channel total time' | translate}}</th>
      </tr>
  </thead>
  <tbody>
    <tr *ngFor="let user of users">
      <td class="normal"><img *ngIf="user.avatar" class="rounded-circle" width="30" src="https://cdn.discordapp.com/avatars/{{user.id}}/{{user.avatar}}"></td>
      <td class="normal"><b>{{user.username}}</b></td>
      <td class="normal"><app-role [user]="user"></app-role></td>
      <td class="normal">
        <button mat-raised-button color="primary" [disabled]="!user.events || user.events.length == 0" (click)="onServerEvents(user)">{{'Server events' | translate}}</button>
      </td>
      <td class="normal" (dblclick)="onEditField(user, 'joinDate', 'Join date')">
          <span *ngIf="user.joinDate">
            {{user.joinDate | amLocal | amDateFormat: 'DD/MM/YYYY HH:mm:ss'}}
          </span>
      </td>
      <td class="normal" (dblclick)="onEditField(user, 'lastTextChannelName', 'Last text channel name')">{{user.lastTextChannelName}}</td>
      <td class="normal" (dblclick)="onEditField(user, 'lastTextChannelDate', 'Last text channel date')">
          <span *ngIf="user.lastTextChannelDate">
            {{user.lastTextChannelDate | amLocal | amDateFormat: 'DD/MM/YYYY HH:mm:ss'}}
          </span>
      </td>
      <td class="normal" (dblclick)="onEditField(user, 'msgChannelCount', 'Msg channel count')">{{user.msgChannelCount}}</td>
      <td class="normal" (dblclick)="onEditField(user, 'lastServerAccess', 'Last server access')">
          <span *ngIf="user.lastServerAccess">
            {{user.lastServerAccess | amLocal | amDateFormat: 'DD/MM/YYYY HH:mm:ss'}}
          </span>
      </td>
      <td class="normal" (dblclick)="onEditField(user, 'lastServerAccessIp', 'Last server access ip')">{{user.lastServerAccessIp}}</td>
      <td class="normal" (dblclick)="onEditField(user, 'lastVoiceChannelName', 'Last voice channel name')">{{user.lastVoiceChannelName}}</td>
      <td class="normal" (dblclick)="onEditField(user, 'lastVoiceChannelAccessDate', 'Last voice channel access date')">
          <span *ngIf="user.lastVoiceChannelAccessDate">
            {{user.lastVoiceChannelAccessDate | amLocal | amDateFormat: 'DD/MM/YYYY HH:mm:ss'}}
          </span>
      </td>
      <td class="normal" (dblclick)="onEditField(user, 'joinVoiceChannelCount', 'Join voice channel count')">{{user.joinVoiceChannelCount}}</td>
      <td class="normal" (dblclick)="onEditField(user, 'voiceChannelTotalTime', 'Voice channel total time')">
          {{user.voiceChannelTotalTime}}
      </td>
    </tr>
  </tbody>
</table>

<button mat-button matBadgePosition="before" matBadgeColor="warn" class="float-btn filter-btn" (click)="onFilter()">
  <fa-icon [icon]="faFilter" class="float-btn-icon"></fa-icon>
</button>